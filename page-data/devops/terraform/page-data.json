{"componentChunkName":"component---src-templates-blog-post-js","path":"/devops/terraform/","result":{"data":{"site":{"siteMetadata":{"title":"Ulfrid_log","author":"[ulfrid]","siteUrl":"https://ulfrid.github.io","comment":{"disqusShortName":"ulfrid-github-io","utterances":""},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"3e8a033e-9db5-5c93-82e4-57558896b854","excerpt":"Terraform 테라폼은 무엇인가. 테라폼은 IaC도구중 하나이다. 테라폼은 HashiCorp사에서 개발했고, Go언어로 프로그래밍 되어 있는 오픈 소스 도구이다.\n테라폼은 테라폼 바이너리를 통해 코드에 정의된 AWS, Microsoft Azure, Google Cloud, OpenStack등의 공급자가 제공한 API를 통해 호출을 한다. 테라폼은 기본적으로 각 공급자가 제공한 API…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhElEQVQoz51SPWvCUBTNH+yQwdVOQkELrTQuQR1EEBQnRdClHQId3Fx1arsUQcxQxMGlRRPiRyyNYsm7p3lP86Fth/bA5fLux+Hce59ERAygIzDGjowDp0U/w5V4IXMJXp+w37DnhFfD4LpuEPPt8GbSZhOwCBVc0WQyocFgQP1+X5jjOEEuWhed4EDMpJsLg56ftphOHep2XwVzu91GLpfDaDSCZVmBAo7xeIxOp/NtgINn0v2tTZfnFuSzB1KURxH1VCGRSEBRFNRqNZRKJTQaDbRaLSSTSaRSKTSbTVQqFRQKBeTzeUqn0+j1ekxyPhhdJ0xod29krzeC0DAM0STLMrLZrGis1+uIxWJQVRXVahWZTAbxeBzlcpnnqVgsQtO0PaF6ZeJF/xSy+c23W76CqRhvNpthuVzCNE0Mh0MRt20buq6L3GKxwHw+J8+wWq2YuPJuR3hfe6cGHe3rDwh3SCEDRc4ffA/u/a8RfXMfyYVX9nl8tv8ojPSGCumfs54SfgFrMyqZvm1u2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"terraform\"\n        title=\"terraform\"\n        src=\"/static/299c202b48b3ecc36892bc61168bcf0f/b9e4f/terraform.png\"\n        srcset=\"/static/299c202b48b3ecc36892bc61168bcf0f/cf440/terraform.png 148w,\n/static/299c202b48b3ecc36892bc61168bcf0f/d2d38/terraform.png 295w,\n/static/299c202b48b3ecc36892bc61168bcf0f/b9e4f/terraform.png 590w,\n/static/299c202b48b3ecc36892bc61168bcf0f/f9b6a/terraform.png 885w,\n/static/299c202b48b3ecc36892bc61168bcf0f/fea0e/terraform.png 900w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"terraform\"><a href=\"#terraform\" aria-label=\"terraform permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Terraform</h1>\n<h2 id=\"테라폼은-무엇인가\"><a href=\"#%ED%85%8C%EB%9D%BC%ED%8F%BC%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"테라폼은 무엇인가 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테라폼은 무엇인가.</h2>\n<p>테라폼은 IaC도구중 하나이다. 테라폼은 HashiCorp사에서 개발했고, Go언어로 프로그래밍 되어 있는 오픈 소스 도구이다.\n테라폼은 테라폼 바이너리를 통해 코드에 정의된 AWS, Microsoft Azure, Google Cloud, OpenStack등의 공급자가 제공한 API를 통해 호출을 한다. 테라폼은 기본적으로 각 공급자가 제공한 API 서버 리소스를 활용해 인프라를 구성한다는 것을 알 수 있다.</p>\n<h2 id=\"테라폼이-다른-코드형-인프라-도구와-다른점은\"><a href=\"#%ED%85%8C%EB%9D%BC%ED%8F%BC%EC%9D%B4-%EB%8B%A4%EB%A5%B8-%EC%BD%94%EB%93%9C%ED%98%95-%EC%9D%B8%ED%94%84%EB%9D%BC-%EB%8F%84%EA%B5%AC%EC%99%80-%EB%8B%A4%EB%A5%B8%EC%A0%90%EC%9D%80\" aria-label=\"테라폼이 다른 코드형 인프라 도구와 다른점은 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테라폼이 다른 코드형 인프라 도구와 다른점은?</h2>\n<ul>\n<li>테라폼은 구성관리를 하는 Ansible, Puppet, Chef, Saltstack 등의 구성도구와 다른 배포도구이다.</li>\n<li>테라폼은 구성관리 도구와 달리 변경사항이 발생시 새로운 환경을 구성해서 배포하고 이상이 없으면, 이전 구성을 제거한다. 따라서 문제가 발생시 이전 환경으로 재빨리 되돌릴 수 있다.</li>\n<li>\n<p>선언형 언어이다. 절차적인 상태의 선언이 아닌 최종적으로 원하는 형태를 선언해서 목적을 달성한다. 이는 코드만 봐서는 크게 차이점을 느낄수 없지만, 동작 방식에서 확연히 차이가 난다.</p>\n<blockquote>\n<p>앤서블의 경우 서버를 10대 돌리고 있다가, 15대로 늘려야 할 경우, 코드에 15라고 쓰면 추가로 15대가 생성돼서, 25대가 되버리므로, 기존의 서버 대수를 파악하고, 5대로 수정해서 실행해야한다. 코드 작성 후 이후에는 상태관리가 이뤄질수 없다는 뜻이다.</p>\n</blockquote>\n<blockquote>\n<p>테라폼은 이전의 서버 카운트가 10이었다면, 15로 늘리면, 기존의 상태인 10에서 15로 증가해준다. 이는 이전 정보의 상태를 테라폼이 알고 있기 때문이다.</p>\n</blockquote>\n<blockquote>\n<p>위의 경우는 비단 갯수만이 아닌 다양한 변경사항이 발생할 경우 더욱 빛을 발한다. 서버 이미지의 아이디 변경과 같은 문제 등</p>\n</blockquote>\n<blockquote>\n<p>코드 자체가 마지막 상태를 나타내므로, 별도의 이력 추적이 필요없으며, 수동으로 현재 상태를 파악할 필요가 없어 작업이 수월해진다.</p>\n</blockquote>\n</li>\n<li>\n<p>별도의 마스터서버가 필요없음</p>\n<blockquote>\n<p>서버 구성 도구와 달리 각 제공사의 API서버와 통신하므로, 별도의 관리 서버가 필요없다.</p>\n</blockquote>\n</li>\n<li>\n<p>에이전트도 없음</p>\n<blockquote>\n<p>별도의 에이전트가 필요없어 에이전트를 관리해야 하거나, 에이전트로 인한 문제를 겪을 필요가 없음.</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"how-it-works\"><a href=\"#how-it-works\" aria-label=\"how it works permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How It Works</h3>\n<ul>\n<li>\n<p>기본 코드 개요</p>\n<blockquote>\n<p>요즘 내가 가장 많이 쓰고 있는 클라우드는 AWS이므로, 예시는 AWS로 진행하려고 한다.</p>\n</blockquote>\n<p>AWS에서 사용하려면 본인 루트 계정에서 IAM 메뉴에가서, 테라폼을 위한 신규 계정을 발행하고, 프로그램 방식 액세스유형으로 계정을 생성 해야한다.</p>\n<p>또한, 원하는 도구들에 대한 FullAccess 권한을 줘야하는것은 필수적이다.</p>\n<p>추가로, 최초 생성시 발행되는 AWS<em>SECRET</em>KEY 및 ID는 꼭\n별도로 저장하거나(csv다운로드 지원) 기록해둬야 한다.</p>\n</li>\n<li>테라폼은 다음과 같이 설치한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#ubuntu</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> terraform\n<span class=\"token comment\">#Mac</span>\n<span class=\"token function\">sudo</span> brew <span class=\"token function\">install</span> terraform</code></pre></div>\n<p>aws credential은 홈폴더에 .aws/credentials 파일에 별도로 저장하면 된다고 알고 있지만</p>\n<p>왜인지 잘 되지 않아서, 우선적으로 진행한 방법은 별도로\n<strong>aws.tf</strong> 라는 파일에 키정보 및 리전 정보를 기록해 두었다.\n추후에 방법을 확인하고 다시 수정하도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">#aws.tf\nprovider &quot;aws&quot; {\n  region     = &quot;ap-northeast-2&quot;\n  access_key = &quot;씨크릿 키 ID&quot;\n  secret_key = &quot;씨크릿 키&quot;\n}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">#main.tf\nresource &quot;aws_instance&quot; &quot;example&quot; {\n  ami           = &quot;ami-06e7b9c5e0c4dd014&quot;\n  instance_type = &quot;t2.micro&quot;\n}</code></pre></div>\n<p>새로운 폴더 생성 후 다음과 같이 작성을 한다.</p>\n<p>그다음 할일은</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#테라폼 이니셜라이징</span>\nterraform init\n\nInitializing the backend<span class=\"token punctuation\">..</span>.\n\nInitializing provider plugins<span class=\"token punctuation\">..</span>.\n\nThe following providers <span class=\"token keyword\">do</span> not have any version constraints <span class=\"token keyword\">in</span> configuration,\nso the latest version was installed.\n\nTo prevent automatic upgrades to new major versions that may contain breaking\nchanges, it is recommended to <span class=\"token function\">add</span> version <span class=\"token operator\">=</span> <span class=\"token string\">\"...\"</span> constraints to the\ncorresponding provider blocks <span class=\"token keyword\">in</span> configuration, with the constraint strings\nsuggested below.\n\n* provider.aws: version <span class=\"token operator\">=</span> <span class=\"token string\">\"~> 2.36\"</span>\n\nTerraform has been successfully initialized<span class=\"token operator\">!</span>\n\nYou may now begin working with Terraform. Try running <span class=\"token string\">\"terraform plan\"</span> to see\nany changes that are required <span class=\"token keyword\">for</span> your infrastructure. All Terraform commands\nshould now work.\n\nIf you ever <span class=\"token builtin class-name\">set</span> or change modules or backend configuration <span class=\"token keyword\">for</span> Terraform,\nrerun this <span class=\"token builtin class-name\">command</span> to reinitialize your working directory. If you forget, other\ncommands will detect it and remind you to <span class=\"token keyword\">do</span> so <span class=\"token keyword\">if</span> necessary.</code></pre></div>\n<p>그렇게 이닛이 무사히 완료 되면, 테스트 해보기 위한 plan명령어를 수행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#테라폼 플랜</span>\n❯ terraform plan\n\nRefreshing Terraform state in-memory prior to plan<span class=\"token punctuation\">..</span>.\nThe refreshed state will be used to calculate this plan, but will not be\npersisted to <span class=\"token builtin class-name\">local</span> or remote state storage.\n\n\n------------------------------------------------------------------------\n\nAn execution plan has been generated and is shown below.\nResource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  <span class=\"token comment\"># aws_instance.example will be created</span>\n  + resource <span class=\"token string\">\"aws_instance\"</span> <span class=\"token string\">\"example\"</span> <span class=\"token punctuation\">{</span>\n      + ami                          <span class=\"token operator\">=</span> <span class=\"token string\">\"ami-06e7b9c5e0c4dd014\"</span>\n      + arn                          <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + associate_public_ip_address  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + availability_zone            <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + cpu_core_count               <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + cpu_threads_per_core         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + get_password_data            <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      + host_id                      <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + <span class=\"token function\">id</span>                           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + instance_state               <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + instance_type                <span class=\"token operator\">=</span> <span class=\"token string\">\"t2.micro\"</span>\n      + ipv6_address_count           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + ipv6_addresses               <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + key_name                     <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + network_interface_id         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + password_data                <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + placement_group              <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + primary_network_interface_id <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + private_dns                  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + private_ip                   <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + public_dns                   <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + public_ip                    <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + security_groups              <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + source_dest_check            <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n      + subnet_id                    <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + tenancy                      <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + volume_tags                  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + vpc_security_group_ids       <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n\n      + ebs_block_device <span class=\"token punctuation\">{</span>\n          + delete_on_termination <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + device_name           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + encrypted             <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + iops                  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + kms_key_id            <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + snapshot_id           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_id             <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_size           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_type           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n      + ephemeral_block_device <span class=\"token punctuation\">{</span>\n          + device_name  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + no_device    <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + virtual_name <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n      + network_interface <span class=\"token punctuation\">{</span>\n          + delete_on_termination <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + device_index          <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + network_interface_id  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n      + root_block_device <span class=\"token punctuation\">{</span>\n          + delete_on_termination <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + encrypted             <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + iops                  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + kms_key_id            <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_id             <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_size           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_type           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\nPlan: <span class=\"token number\">1</span> to add, <span class=\"token number\">0</span> to change, <span class=\"token number\">0</span> to destroy.\n\n------------------------------------------------------------------------\n\nNote: You didn<span class=\"token string\">'t specify an \"-out\" parameter to save this plan, so Terraform\ncan'</span>t guarantee that exactly these actions will be performed <span class=\"token keyword\">if</span>\n<span class=\"token string\">\"terraform apply\"</span> is subsequently run.</code></pre></div>\n<p>마지막으로 plan 적용을 위한 apply까지 진행하면\n실제로 AWS에 서버가 생성되는걸 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#테라폼 어플라이</span>\n❯ terraform apply\n\nAn execution plan has been generated and is shown below.\nResource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  <span class=\"token comment\"># aws_instance.example will be created</span>\n  + resource <span class=\"token string\">\"aws_instance\"</span> <span class=\"token string\">\"example\"</span> <span class=\"token punctuation\">{</span>\n      + ami                          <span class=\"token operator\">=</span> <span class=\"token string\">\"ami-06e7b9c5e0c4dd014\"</span>\n      + arn                          <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + associate_public_ip_address  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + availability_zone            <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + cpu_core_count               <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + cpu_threads_per_core         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + get_password_data            <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      + host_id                      <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + <span class=\"token function\">id</span>                           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + instance_state               <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + instance_type                <span class=\"token operator\">=</span> <span class=\"token string\">\"t2.micro\"</span>\n      + ipv6_address_count           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + ipv6_addresses               <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + key_name                     <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + network_interface_id         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + password_data                <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + placement_group              <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n      + primary_network_interface_id <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n                 <span class=\"token punctuation\">..</span>.  중략   <span class=\"token punctuation\">..</span>.\n          + kms_key_id            <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_id             <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_size           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n          + volume_type           <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>known after apply<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\nPlan: <span class=\"token number\">1</span> to add, <span class=\"token number\">0</span> to change, <span class=\"token number\">0</span> to destroy.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only <span class=\"token string\">'yes'</span> will be accepted to approve.\n\n  Enter a value: <span class=\"token function\">yes</span>\n\naws_instance.example: Creating<span class=\"token punctuation\">..</span>.\naws_instance.example: Still creating<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>10s elapsed<span class=\"token punctuation\">]</span>\naws_instance.example: Still creating<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>20s elapsed<span class=\"token punctuation\">]</span>\naws_instance.example: Creation complete after 26s <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>i-0b8687e0eaa45d66a<span class=\"token punctuation\">]</span>\n\nApply complete<span class=\"token operator\">!</span> Resources: <span class=\"token number\">1</span> added, <span class=\"token number\">0</span> changed, <span class=\"token number\">0</span> destroyed.</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.914612146722796%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuElEQVQoz61OWw7CMAzr/e/BTfjgCHxMY+8X0AkmjbXJatJOleB7s2TFTiInyq2M6UM4nUtcrh2ml4a1FkQE9mQKOvpf7WfWGkzTG1o/MY4jFATGEqp2QN8PSNIMRdWgrDtkRY266VCUZfCV6LrtkYtP0jzs3fJKahvm94eG8tecAxZaYYWLITnAQfu6UXrEgZY2H/d8j1eAVifVQc3zjA0OR0Ax8xYnbx7BEBhNDN71oTHmL2hv4BcYzSRPXAwvxgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ec2 apply\"\n        title=\"ec2 apply\"\n        src=\"/static/acb8e2a31bf34bfc4f693baacf4e2868/b9e4f/ec2_apply.png\"\n        srcset=\"/static/acb8e2a31bf34bfc4f693baacf4e2868/cf440/ec2_apply.png 148w,\n/static/acb8e2a31bf34bfc4f693baacf4e2868/d2d38/ec2_apply.png 295w,\n/static/acb8e2a31bf34bfc4f693baacf4e2868/b9e4f/ec2_apply.png 590w,\n/static/acb8e2a31bf34bfc4f693baacf4e2868/f9b6a/ec2_apply.png 885w,\n/static/acb8e2a31bf34bfc4f693baacf4e2868/2d849/ec2_apply.png 1180w,\n/static/acb8e2a31bf34bfc4f693baacf4e2868/e520e/ec2_apply.png 3326w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>생성 된걸 눈으로 봤다면, 이제 제거하자.\n명령어는 ‘terraform destroy’\n이부분은 화면 및 진행상황은 생략한다.</p>\n<p>매우 잘 제거 됐을 것이다.</p>\n<p>기본적인 테라폼 구동에 대한 기초 정리는 이쯤에서 마치고, 향후 복합적인 인프라 구성에 대한 글도 작성하려고 한다. 그날이 바로 다음 주가 되길 바라며</p>\n<p>오늘은 여기까지!</p>","frontmatter":{"title":"terraform","date":"November 17, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/devops/terraform/","previous":{"fields":{"slug":"/devops/infrastructure_as_code/"},"frontmatter":{"title":"Infrastructure_as_Code","category":"devops"}},"next":null}}}