---
title: 'Infrastructure_as_Code'
date: '2019-11-17T20:39:21.169Z'
category: 'devops'
---

![](./images/iac.png)

# IaC 입문하기

## IaC(Infrastructure as Code)

코드형 인프라란 코드 형태로 인프라를 짝성, 정의, 배포, 업데이트 하는 것을 의미한다. 물리 장비를 설정하는 것 뿐만 아니라 모든 운영을 코드로 한다는 인식 전환이 중요하다. 실제로 데브옵스는 서버, 데이터베이스, 네트워크, 로그파일, 애플리케이션 설정, 자동화된 검증 절차, 배포 방법 등 모든 것을 코드 형태로 관리한다.

## IaC 도구들은 크게 네가지 범주로 나뉜다.

- 애드 혹 스크립트

  > 가장 간단하게 코드 형태로 자동화를 구현할 수 있는 스크립트
  > 주로 배쉬 스크립트를 의미한다.

  ```bash
  # Update Ubuntu apt
  sudo apt update

  # Install Nginx
  sudo apt install nginx
  ```

  > 다만, 수동절차이고, 관리 또한 수동이므로 스파게티 코드가 되기 쉽고
  > 다시 작성할 가능성이 높다.

- 구성 관리 도구

  > Chef, Puppet, Ansible, Saltstack 같은 구성 관리도구 툴들이
  > 대표적이다. 서버에 소프트웨어를 설치하거나 관리하는 목적으로 사용한다.

  1. 코딩규칙
     애드 혹 스크립트와 달리 규칙성 있는 문서화 및 파일구성을 통해 관리한다.
  2. 멱등성
     *멱등성*은 같은 코드라면 수행횟수와 상관 없이 결과 값은 항상 같아야 한다는 의미이다. 몇 번을 수행하더라도 항상 같은 형상과 멱등성이 유지된다.
  3. 분산형 구조
     애드 혹 스크립트는 소규모 인프라에 적합 하다면, 구성관리 도구는 대규모 환경에도 적합하다.

- 서버 템플릿 도구

  > 서버템플릿 도구의 대안으로 말할 수 있는 것으로, Docker, Packer, Vagrant 등이 있다.
  > 예시로 든 Docker만으로도 어떤 역할을 하는지 알 수 있겠지만
  > 많은 서버를 배포하고 같은 코드를 서버마다 같은 설정으로 동일하게 수행하는 것이 아니라 소프트웨어와 수행 시에 필요한 설정과 의존성 있는 프로그램 들을 포함한 특정 시점에 운영 체제와 함께 스냅샷 하여 템플릿 이미지화 하는 것이다.

  > VM 혹은 Container로 구분되지만, 요즘은 거진 Container가 더 범용적이다.

  > 서버 템플릿은 변하지 않는 인프라(Immutable Infrastructure)의 주요한 기능이며, 서버를 한번 배포하면 해당 서버는 절대 변하지 않는 설정을 가진다.

- 서버 프로비전 도구

  > Terraform, CloudFormation, Openstack Heat등은 서버 자체를 구성하기 위한 도구이다.

  > 서버 및 데이터베이스, 네트워크, dns등 다양한 리소스를 생성하고 관리할 수 있다.

## Why IaC?

- 2016년도에 발표한 데브옵스 레포트에 따르면 개발에서 상용서비스로 적용을 위해 거쳐야 하는 프로세스가 2천배 이상으로 줄어들고. 배포주기는 200배 빨라지고, 장애복구 시간은 24배 빨라졌다고 한다.

- 셀프서비스

  > 기존의 조직에서는 개발자는 개발을 하고 배포는 배포지정일에 배포해야하고, 문제가 생기면 다같이 밤을 지새우곤 했다. 코드화된 인프라는 개발자가 원하는 시점에 언제든지 배포가 가능하게 해준다.

- 속도와 안정성

  > 배포 자동화가 이루어지면, 운영자가 수동으로 배포하지 않고 컴퓨팅 리소스가 신속하게 배포되므로 속도와 안전성이 눈에 띄게 향상될 것이다. 또한 수동 오류를 줄일 수 있다.

- 문서화

  > 인프라의 상태 정보가 시스템 관라지의 머릿속에 존재하는 것이 아닌 누구나 읽을수 있고 관리될 수 있으며, 부재로 인한 문제가 생기지 않는다.

- 버전관리

  > 깃을 통한 형상관리 및 커밋 로그를 통한 문제시 롤백 및 이력을 추적할 수 있게 된다.

- 확인 및 검사

  > 코드 리뷰가 가능하며, 테스트가 가능하다. 이로 인해 결함을 낮출 수 있다.

- 재사용성

  > 모듈화 하여 관리하면, 처음부터 작성할 필요 없이 공통된 사항을 재사용할 수 있다.

IaC에 대한 개념 정리 및 필요성에 대해 정리 해보았다. 다음 글은 이 중 테라폼을 다룰 예정이다.

오늘은 여기까지~
